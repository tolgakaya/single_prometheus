A) Stage 1: Quick Health Check

Kullandığı http toolları ve parametreleri

1. Error Rate Check
sum(rate({namespace="etiyamobile-production"} | json | __error__="" | log_level="ERROR" [5m])) by (service_name)

2. Service Health Check
sum by (pod) (rate({namespace="etiyamobile-production"} |~ "ERROR|WARN|FATAL" [5m]))

3. Critical Errors Check
{namespace="etiyamobile-production"} |~ "(FATAL|PANIC|fatal|panic)"


B) Anomaly Detection

Kullandığı http toolları ve parametreleri

1. Anomaly - Moving Average
rate({namespace="etiyamobile-production"} |= "error"[1m])

2. Anomaly - Standard Deviation
rate({namespace="etiyamobile-production"} |~ "error" [1m])

3. Anomaly - Spike Detection
rate({namespace="etiyamobile-production"} |~ "error" [1m])

4. Anomaly - Rate Change
rate({namespace="etiyamobile-production"} |~ "error" [2m])


C) Stage 2: Pattern Analysis

Kullandığı http toolları ve parametreleri

1. Thread Correlation Analyzer
sum by (process_thread_name, service_name, error_type) (   count_over_time(     {namespace="etiyamobile-production"}      | json      | process_thread_name=~"taskScheduler-.*|Thread-.*"      | log_level="ERROR"      [1h]   ) )

2. Service Error Distribution
sum(rate({namespace="etiyamobile-production"} |~ "error" [1m])) by (service_name,pod)

3. Cascade Timeline Reconstructor
{namespace="etiyamobile-production"} | json | __error__="" | log_level=~"ERROR|FATAL|WARN" | line_format "{{.timestamp}}|{{.service_name}}|{{.process_thread_name}}|{{.error_type}}|{{.message}}"

4. Request ID Correlation
{namespace="etiyamobile-production"} |~ "trace_id|traceID|correlation_id" |~ "error"

5. Error Pattern Analyzer
topk(20,   sum by (error) (     count_over_time(       {namespace="etiyamobile-production"}        |~ "error"        | json        | error!=""        [5m]     )   ) )


D) Stage 3: Root Cause Analysis

1. Stack Trace Pattern Analyzer
{namespace="etiyamobile-production"} | json | error_stack_trace!="" | line_format "{{.service_name}}|||{{.error_type}}|||{{.error_stack_trace}}"|

2. Integration Health Monitor
sum by (target) (count_over_time({namespace="etiyamobile-production"} | json | error_message=~".*(eca-t4|domain-config-t4).*401.*" | regexp "(?P<target>eca-t4|[a-zA-Z-]+-config-t4)" [5m]))

3. Slow Query Logs
{namespace="etiyamobile-production"} |~ "(slow query|execution time).*(\\d{4,}ms|[2-9]\\d{3}ms)"

4. DB Connection Analysis
{namespace="etiyamobile-production",pod=~".*db.*|.*database.*|.*mysql.*|.*postgres.*"} |~ "connection|timeout|deadlock"

5. Memory Dump Analysis
{namespace="etiyamobile-production"} |~ "OOM|OutOfMemory|memory limit|heap space"|

6. Pod Restart Logs
 {job="kube-events"} |~ "namespace=\"etiyamobile-production\"" |~ "Restarted|CrashLoopBackOff|OOMKilled"
 