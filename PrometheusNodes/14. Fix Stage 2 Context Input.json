[
  {
    "output": {
      "stage": "deep_analysis",
      "investigation_id": "ctx-1765884958296-sowzfe-s2",
      "execution_phases": {
        "instant": {
          "tools_used": [
            "Pod_Resource_Usage",
            "Container_Restarts",
            "Pod_Status_Check",
            "Application_Metrics",
            "Kubernetes_HPA_Status",
            "Kubernetes_PVC_Status"
          ],
          "findings": {
            "critical_pods": [],
            "resource_pressure": [
              {
                "pod": "kubecost-aggregator-0",
                "memory_usage": "2306797568"
              },
              {
                "pod": "elasticsearch-data-0",
                "memory_usage": "2290237440"
              }
            ]
          }
        },
        "trend": {
          "tools_used": [
            "Anomaly_Patterns",
            "Resource_Exhaustion_Prediction",
            "Historical_Comparison_24h"
          ],
          "findings": {
            "memory_growth": "",
            "restart_pattern": ""
          }
        },
        "anomaly": {
          "tools_used": [
            "HTTP_Error_Rates",
            "Node_Network_Health",
            "Node_Conditions",
            "Node_Resource_Status"
          ],
          "findings": {
            "predictions": [],
            "anomalies": []
          }
        }
      },
      "correlation_matrix": {
        "primary_chain": "",
        "affected_services": [],
        "blast_radius": "",
        "kubernetes_impact": {
          "evicted_pods": 0,
          "pending_pods": 0
        }
      },
      "root_cause": {
        "identified": false,
        "component": "",
        "issue": "",
        "evidence": [],
        "confidence": 0
      },
      "proceed_to_stage3": false,
      "_context": {
        "contextId": "ctx-1765884958296-sowzfe",
        "createdAt": "2025-12-16T11:35:58.296Z",
        "source": {
          "type": "alert-listener",
          "priority": "critical"
        },
        "initialParams": {
          "startTime": 1765881358,
          "endTime": 1765884958,
          "namespaces": [
            "etiyamobile-production"
          ],
          "services": [
            "prometheus-kube-state-metrics",
            "kube-state-metrics",
            "domain-config-service"
          ],
          "focusAreas": [
            "Pod is crash looping",
            "Container startup failure",
            "Chaos engineering test pattern"
          ],
          "analysisType": "alert-driven",
          "context": {
            "alertName": "KubePodCrashLooping",
            "alertId": "alert-1765884958197",
            "alertPriority": "critical",
            "source": "alertmanager",
            "kubernetes": {
              "container": "domain-config-service",
              "pod": "domain-config-service-t3-645d68cbc8-4h88r",
              "namespace": "etiyamobile-production",
              "namespaces": [
                "etiyamobile-production"
              ],
              "service": "prometheus-kube-state-metrics",
              "deployment": null,
              "node": null,
              "persistentvolumeclaim": null,
              "volumename": null,
              "useSpecificFilters": true,
              "useMultiNamespace": false
            },
            "affectedServices": [
              "prometheus-kube-state-metrics",
              "kube-state-metrics",
              "domain-config-service"
            ],
            "errorPatterns": [
              "Pod is crash looping",
              "Container startup failure",
              "Chaos engineering test pattern"
            ],
            "alerts": [
              {
                "alertname": "KubePodCrashLooping",
                "severity": "critical"
              }
            ]
          }
        },
        "kubernetesFilters": {
          "container": "domain-config-service",
          "pod": "domain-config-service-t3-645d68cbc8-4h88r",
          "namespace": "etiyamobile-production",
          "namespaces": [
            "etiyamobile-production"
          ],
          "service": "prometheus-kube-state-metrics",
          "deployment": null,
          "node": null,
          "persistentvolumeclaim": null,
          "volumename": null,
          "useSpecificFilters": true,
          "useMultiNamespace": false
        },
        "alertContext": {
          "alertName": "KubePodCrashLooping",
          "alertId": "alert-1765884958197",
          "alertPriority": "critical",
          "source": "alertmanager",
          "kubernetes": {
            "container": "domain-config-service",
            "pod": "domain-config-service-t3-645d68cbc8-4h88r",
            "namespace": "etiyamobile-production",
            "namespaces": [
              "etiyamobile-production"
            ],
            "service": "prometheus-kube-state-metrics",
            "deployment": null,
            "node": null,
            "persistentvolumeclaim": null,
            "volumename": null,
            "useSpecificFilters": true,
            "useMultiNamespace": false
          },
          "affectedServices": [
            "prometheus-kube-state-metrics",
            "kube-state-metrics",
            "domain-config-service"
          ],
          "errorPatterns": [
            "Pod is crash looping",
            "Container startup failure",
            "Chaos engineering test pattern"
          ],
          "alerts": [
            {
              "alertname": "KubePodCrashLooping",
              "severity": "critical"
            }
          ]
        },
        "stageConfig": {
          "maxStages": 6,
          "enablePatternAnalysis": true,
          "enableAnomalyDetection": true,
          "enablePredictiveAnalysis": true,
          "forceDeepAnalysis": true
        },
        "priority": "critical",
        "forceDeepAnalysis": true,
        "workflowMetadata": {
          "workflowId": "LBDqj72azAqepcuC",
          "executionId": "6321",
          "requestId": "alert-alert-1765884958197-1765884958208",
          "orchestratorId": "direct-1765884958208"
        },
        "stageResults": {
          "stage1": {
            "stage": "initial_analysis",
            "timestamp": "2025-12-16T11:36:58.296Z",
            "cluster": "etiyamobile-production",
            "overall_status": "critical",
            "proceed_to_stage2": true,
            "urgency": "critical",
            "reason": "The alert KubePodCrashLooping is active and critical. No additional alerts or cascading effects detected in the same namespace.",
            "alerts": {
              "total": 1,
              "critical": 1,
              "warning": 0,
              "top_alerts": [
                "KubePodCrashLooping"
              ]
            },
            "scores": {
              "cluster_health": 50,
              "node_availability": 100,
              "pod_stability": 20,
              "api_reliability": 100
            },
            "quick_findings": [
              "Pod domain-config-service-t3-645d68cbc8-4h88r is crash looping.",
              "No other alerts detected in the same namespace.",
              "Cluster health is degraded due to pod instability."
            ],
            "forceDeepAnalysis": true,
            "_context": {
              "contextId": "ctx-1765884958296-sowzfe",
              "createdAt": "2025-12-16T11:35:58.296Z",
              "source": {
                "type": "alert-listener",
                "priority": "critical"
              },
              "initialParams": {
                "startTime": 1765881358,
                "endTime": 1765884958,
                "namespaces": [
                  "etiyamobile-production"
                ],
                "services": [
                  "prometheus-kube-state-metrics",
                  "kube-state-metrics",
                  "domain-config-service"
                ],
                "focusAreas": [
                  "Pod is crash looping",
                  "Container startup failure",
                  "Chaos engineering test pattern"
                ],
                "analysisType": "alert-driven",
                "context": {
                  "alertName": "KubePodCrashLooping",
                  "alertId": "alert-1765884958197",
                  "alertPriority": "critical",
                  "source": "alertmanager",
                  "kubernetes": {
                    "container": "domain-config-service",
                    "pod": "domain-config-service-t3-645d68cbc8-4h88r",
                    "namespace": "etiyamobile-production",
                    "namespaces": [
                      "etiyamobile-production"
                    ],
                    "service": "prometheus-kube-state-metrics",
                    "deployment": null,
                    "node": null,
                    "persistentvolumeclaim": null,
                    "volumename": null,
                    "useSpecificFilters": true,
                    "useMultiNamespace": false
                  },
                  "affectedServices": [
                    "prometheus-kube-state-metrics",
                    "kube-state-metrics",
                    "domain-config-service"
                  ],
                  "errorPatterns": [
                    "Pod is crash looping",
                    "Container startup failure",
                    "Chaos engineering test pattern"
                  ],
                  "alerts": [
                    {
                      "alertname": "KubePodCrashLooping",
                      "severity": "critical"
                    }
                  ]
                }
              },
              "kubernetesFilters": {
                "container": "domain-config-service",
                "pod": "domain-config-service-t3-645d68cbc8-4h88r",
                "namespace": "etiyamobile-production",
                "namespaces": [
                  "etiyamobile-production"
                ],
                "service": "prometheus-kube-state-metrics",
                "deployment": null,
                "node": null,
                "persistentvolumeclaim": null,
                "volumename": null,
                "useSpecificFilters": true,
                "useMultiNamespace": false
              },
              "alertContext": {
                "alertName": "KubePodCrashLooping",
                "alertId": "alert-1765884958197",
                "alertPriority": "critical",
                "source": "alertmanager",
                "kubernetes": {
                  "container": "domain-config-service",
                  "pod": "domain-config-service-t3-645d68cbc8-4h88r",
                  "namespace": "etiyamobile-production",
                  "namespaces": [
                    "etiyamobile-production"
                  ],
                  "service": "prometheus-kube-state-metrics",
                  "deployment": null,
                  "node": null,
                  "persistentvolumeclaim": null,
                  "volumename": null,
                  "useSpecificFilters": true,
                  "useMultiNamespace": false
                },
                "affectedServices": [
                  "prometheus-kube-state-metrics",
                  "kube-state-metrics",
                  "domain-config-service"
                ],
                "errorPatterns": [
                  "Pod is crash looping",
                  "Container startup failure",
                  "Chaos engineering test pattern"
                ],
                "alerts": [
                  {
                    "alertname": "KubePodCrashLooping",
                    "severity": "critical"
                  }
                ]
              },
              "stageConfig": {
                "maxStages": 6,
                "enablePatternAnalysis": true,
                "enableAnomalyDetection": true,
                "enablePredictiveAnalysis": true,
                "forceDeepAnalysis": true
              },
              "priority": "critical",
              "forceDeepAnalysis": true,
              "workflowMetadata": {
                "workflowId": "LBDqj72azAqepcuC",
                "executionId": "6321",
                "requestId": "alert-alert-1765884958197-1765884958208",
                "orchestratorId": "direct-1765884958208"
              },
              "stageResults": {
                "stage1": {
                  "output": {
                    "overall_status": "critical",
                    "alerts": {
                      "total": 1,
                      "critical": 1,
                      "warning": 0,
                      "top_alerts": [
                        "KubePodCrashLooping"
                      ]
                    },
                    "scores": {
                      "cluster_health": 50,
                      "node_availability": 100,
                      "pod_stability": 20,
                      "api_reliability": 100
                    },
                    "quick_findings": [
                      "Pod domain-config-service-t3-645d68cbc8-4h88r is crash looping.",
                      "No other alerts detected in the same namespace.",
                      "Cluster health is degraded due to pod instability."
                    ],
                    "proceed_to_stage2": true,
                    "urgency": "critical",
                    "reason": "The alert KubePodCrashLooping is active and critical. No additional alerts or cascading effects detected in the same namespace.",
                    "forceDeepAnalysis": true
                  },
                  "completedAt": "2025-12-16T11:36:19.817Z",
                  "decision": true,
                  "status": "critical",
                  "alerts": 1
                }
              },
              "decisions": {},
              "debug": {
                "contextVersion": "1.0",
                "createdBy": "Unified Entry Point",
                "sourceType": "alert-listener",
                "alertName": "KubePodCrashLooping",
                "priority": "critical"
              }
            }
          },
          "forceDeepAnalysisOverride": {
            "output": {
              "overrideApplied": true,
              "reason": "Deep analysis forced due to critical priority from alert-listener",
              "originalPriority": "critical",
              "originalSource": {
                "type": "alert-listener",
                "priority": "critical"
              }
            },
            "completedAt": "2025-12-16T11:36:19.846Z"
          }
        },
        "decisions": {
          "forceDeepAnalysisOverride": {
            "timestamp": "2025-12-16T11:36:19.846Z",
            "forceDeepAnalysis": true,
            "overrideApplied": true,
            "reason": "Deep analysis forced due to critical priority from alert-listener"
          }
        },
        "debug": {
          "contextVersion": "1.0",
          "createdBy": "Unified Entry Point",
          "sourceType": "alert-listener",
          "alertName": "KubePodCrashLooping",
          "priority": "critical"
        },
        "stage1Complete": true,
        "stage2Decision": {
          "requiresDeepAnalysis": true,
          "timestamp": "2025-12-16T11:36:19.830Z",
          "reasons": [
            "Critical alert requires full analysis pipeline",
            "Force deep analysis flag is set"
          ],
          "suggestedStages": [
            2,
            3,
            4,
            5,
            6
          ],
          "alertInfo": {
            "name": "KubePodCrashLooping",
            "priority": "critical",
            "hasCascading": false
          },
          "estimatedTime": "25-50 seconds"
        },
        "updatedAt": "2025-12-16T11:36:32.698Z"
      },
      "knowledgeBase": {
        "alertCategory": "APPLICATION",
        "urgencyLevel": "CRITICAL",
        "cascadeRisk": "MEDIUM",
        "kbEntriesAvailable": 9,
        "categoriesSupported": 151,
        "alertMappings": 12,
        "enhancementVersion": "KB-Enhanced-Full-v1.0",
        "kbFallbackUsed": false,
        "alert": {
          "severity": "critical",
          "description": "Pod repeatedly crashes after starting",
          "commonCauses": [
            "Application bugs",
            "Missing configs/secrets",
            "Resource limits exceeded",
            "Invalid probe settings"
          ],
          "troubleshootingSteps": [
            "kubectl logs [pod] --previous",
            "kubectl describe pod [pod]",
            "kubectl get events --field-selector involvedObject.name=[pod]",
            "kubectl top pod [pod]"
          ],
          "expectedResults": [
            "Logs show application errors",
            "RestartCount > 5",
            "OOMKilled/ExitCode in status",
            "FailedScheduling events"
          ],
          "immediateActions": [
            "Rollback deployment",
            "Increase memory limits",
            "Fix probe configuration",
            "Check secret mounts"
          ],
          "longTermSolutions": [
            "Implement CI/CD health checks",
            "Add resource quotas",
            "Configure proper liveness probes"
          ],
          "requiredMetrics": [
            "kube_pod_container_status_restarts_total",
            "kube_pod_status_phase"
          ],
          "cascadeCheckPoints": [
            "service_availability",
            "deployment_health",
            "application_performance"
          ]
        }
      },
      "stage1Results": {
        "stage": "initial_analysis",
        "timestamp": "2025-12-16T11:36:58.296Z",
        "cluster": "etiyamobile-production",
        "overall_status": "critical",
        "proceed_to_stage2": true,
        "urgency": "critical",
        "reason": "The alert KubePodCrashLooping is active and critical. No additional alerts or cascading effects detected in the same namespace.",
        "alerts": {
          "total": 1,
          "critical": 1,
          "warning": 0,
          "top_alerts": [
            "KubePodCrashLooping"
          ]
        },
        "scores": {
          "cluster_health": 50,
          "node_availability": 100,
          "pod_stability": 20,
          "api_reliability": 100
        },
        "quick_findings": [
          "Pod domain-config-service-t3-645d68cbc8-4h88r is crash looping.",
          "No other alerts detected in the same namespace.",
          "Cluster health is degraded due to pod instability."
        ],
        "forceDeepAnalysis": true,
        "_context": {
          "contextId": "ctx-1765884958296-sowzfe",
          "createdAt": "2025-12-16T11:35:58.296Z",
          "source": {
            "type": "alert-listener",
            "priority": "critical"
          },
          "initialParams": {
            "startTime": 1765881358,
            "endTime": 1765884958,
            "namespaces": [
              "etiyamobile-production"
            ],
            "services": [
              "prometheus-kube-state-metrics",
              "kube-state-metrics",
              "domain-config-service"
            ],
            "focusAreas": [
              "Pod is crash looping",
              "Container startup failure",
              "Chaos engineering test pattern"
            ],
            "analysisType": "alert-driven",
            "context": {
              "alertName": "KubePodCrashLooping",
              "alertId": "alert-1765884958197",
              "alertPriority": "critical",
              "source": "alertmanager",
              "kubernetes": {
                "container": "domain-config-service",
                "pod": "domain-config-service-t3-645d68cbc8-4h88r",
                "namespace": "etiyamobile-production",
                "namespaces": [
                  "etiyamobile-production"
                ],
                "service": "prometheus-kube-state-metrics",
                "deployment": null,
                "node": null,
                "persistentvolumeclaim": null,
                "volumename": null,
                "useSpecificFilters": true,
                "useMultiNamespace": false
              },
              "affectedServices": [
                "prometheus-kube-state-metrics",
                "kube-state-metrics",
                "domain-config-service"
              ],
              "errorPatterns": [
                "Pod is crash looping",
                "Container startup failure",
                "Chaos engineering test pattern"
              ],
              "alerts": [
                {
                  "alertname": "KubePodCrashLooping",
                  "severity": "critical"
                }
              ]
            }
          },
          "kubernetesFilters": {
            "container": "domain-config-service",
            "pod": "domain-config-service-t3-645d68cbc8-4h88r",
            "namespace": "etiyamobile-production",
            "namespaces": [
              "etiyamobile-production"
            ],
            "service": "prometheus-kube-state-metrics",
            "deployment": null,
            "node": null,
            "persistentvolumeclaim": null,
            "volumename": null,
            "useSpecificFilters": true,
            "useMultiNamespace": false
          },
          "alertContext": {
            "alertName": "KubePodCrashLooping",
            "alertId": "alert-1765884958197",
            "alertPriority": "critical",
            "source": "alertmanager",
            "kubernetes": {
              "container": "domain-config-service",
              "pod": "domain-config-service-t3-645d68cbc8-4h88r",
              "namespace": "etiyamobile-production",
              "namespaces": [
                "etiyamobile-production"
              ],
              "service": "prometheus-kube-state-metrics",
              "deployment": null,
              "node": null,
              "persistentvolumeclaim": null,
              "volumename": null,
              "useSpecificFilters": true,
              "useMultiNamespace": false
            },
            "affectedServices": [
              "prometheus-kube-state-metrics",
              "kube-state-metrics",
              "domain-config-service"
            ],
            "errorPatterns": [
              "Pod is crash looping",
              "Container startup failure",
              "Chaos engineering test pattern"
            ],
            "alerts": [
              {
                "alertname": "KubePodCrashLooping",
                "severity": "critical"
              }
            ]
          },
          "stageConfig": {
            "maxStages": 6,
            "enablePatternAnalysis": true,
            "enableAnomalyDetection": true,
            "enablePredictiveAnalysis": true,
            "forceDeepAnalysis": true
          },
          "priority": "critical",
          "forceDeepAnalysis": true,
          "workflowMetadata": {
            "workflowId": "LBDqj72azAqepcuC",
            "executionId": "6321",
            "requestId": "alert-alert-1765884958197-1765884958208",
            "orchestratorId": "direct-1765884958208"
          },
          "stageResults": {
            "stage1": {
              "output": {
                "overall_status": "critical",
                "alerts": {
                  "total": 1,
                  "critical": 1,
                  "warning": 0,
                  "top_alerts": [
                    "KubePodCrashLooping"
                  ]
                },
                "scores": {
                  "cluster_health": 50,
                  "node_availability": 100,
                  "pod_stability": 20,
                  "api_reliability": 100
                },
                "quick_findings": [
                  "Pod domain-config-service-t3-645d68cbc8-4h88r is crash looping.",
                  "No other alerts detected in the same namespace.",
                  "Cluster health is degraded due to pod instability."
                ],
                "proceed_to_stage2": true,
                "urgency": "critical",
                "reason": "The alert KubePodCrashLooping is active and critical. No additional alerts or cascading effects detected in the same namespace.",
                "forceDeepAnalysis": true
              },
              "completedAt": "2025-12-16T11:36:19.817Z",
              "decision": true,
              "status": "critical",
              "alerts": 1
            }
          },
          "decisions": {},
          "debug": {
            "contextVersion": "1.0",
            "createdBy": "Unified Entry Point",
            "sourceType": "alert-listener",
            "alertName": "KubePodCrashLooping",
            "priority": "critical"
          }
        }
      },
      "stage1Data": {
        "overall_status": "critical",
        "alerts": {
          "total": 1,
          "critical": 1,
          "warning": 0,
          "top_alerts": [
            "KubePodCrashLooping"
          ]
        },
        "scores": {
          "cluster_health": 50,
          "node_availability": 100,
          "pod_stability": 20,
          "api_reliability": 100
        },
        "quick_findings": [
          "Pod domain-config-service-t3-645d68cbc8-4h88r is crash looping.",
          "No other alerts detected in the same namespace.",
          "Cluster health is degraded due to pod instability."
        ]
      },
      "alert_correlation_needed": false,
      "_debug": {
        "nodeType": "Stage 2: Deep Analysis",
        "processedAt": "2025-12-16T11:36:32.699Z",
        "contextId": "ctx-1765884958296-sowzfe",
        "contextPreserved": true,
        "receivedFromStage": "",
        "stageSequence": []
      }
    }
  }
]